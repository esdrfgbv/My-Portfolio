<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Project Details | Portfolio</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="form-page">
<div class="form-container" id="detailsContainer">

  <div id="projectDetails"></div>

  <div class="form-buttons">
    <button id="editBtn">Edit</button>
    <button onclick="window.location.href='index.html'" class="cancel-btn">Back</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", ()=>{
  const selectedId = localStorage.getItem("selectedProjectId");
  const projects = JSON.parse(localStorage.getItem("projects")||"[]");
  const project = projects.find(p=>p.id==selectedId);
  const container = document.getElementById("projectDetails");

  if(!project){ 
    container.innerHTML="<p>Project not found!</p>"; 
    return; 
  }

  // Render project name as heading, other details below
  container.innerHTML = `
    <h1>${project.title}</h1>
    <div class="detail-row"><span class="label">Description:</span> <span class="value">${project.description}</span></div>
    ${project.tech ? `<div class="detail-row"><span class="label">Tech:</span> <span class="value">${project.tech}</span></div>` : ""}
    ${project.link ? `<div class="detail-row"><span class="label">Link:</span> <span class="value"><a href="${project.link}" target="_blank">${project.link}</a></span></div>` : ""}
  `;

  // Show attached files
  if(project.files && project.files.length>0){
    const filesDiv = document.createElement("div");
    filesDiv.style.marginTop="20px";
    filesDiv.innerHTML = "<h3>Attached Files:</h3>";
    project.files.forEach(f=>{
      const link = document.createElement("a");
      link.href = f.data;
      link.target = "_blank";
      link.textContent = f.name;
      link.style.display="block";
      link.style.color="#00bcd4";
      filesDiv.appendChild(link);
    });
    container.appendChild(filesDiv);
  }

  document.getElementById("editBtn").addEventListener("click", ()=>{
    localStorage.setItem("editProjectId", selectedId);
    window.location.href="edit_project.html";
  });
});
</script>
</body>
</html>
